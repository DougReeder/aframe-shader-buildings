!function(o){var t={};function e(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return o[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=o,e.c=t,e.d=function(o,t,n){e.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:n})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,t){if(1&t&&(o=e(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var r in o)e.d(n,r,function(t){return o[t]}.bind(null,r));return n},e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,"a",t),t},e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},e.p="",e(e.s=2)}([function(o,t){o.exports="\nuniform vec3 sunNormal;\n\nvarying vec3 pos;\nvarying float sunFactor;\n\nvoid main() {\n  pos = position;\n\n  sunFactor = 0.5 + max(dot(normal, sunNormal), 0.0);\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(o,t){o.exports="\nconst float PI = 3.1415926535897932384626433832795;\n\nuniform float elevation;\nuniform float xProportion;\nuniform float zProportion;\nuniform float yProportion;\nuniform float windowWidth;\nuniform float windowHeight;\nuniform vec3 wallColor;\nuniform vec3 windowColor;\n\nvarying vec3 pos;\nvarying float sunFactor;\n\nvoid main() {\n    float xx1 = step(windowWidth, sin(pos.x * 2.0 * PI / xProportion - PI / 2.0));\n    float xx2 = step(0.8, sin(pos.z * 2.0 * PI / zProportion + PI / 2.0));\n\n    float zz1 = step(windowWidth, sin(pos.z * 2.0 * PI / zProportion - PI / 2.0));\n    float zz2 = step(0.8, sin(pos.x * 2.0 * PI / xProportion + PI / 2.0));\n\n    float yy1 = step(windowHeight, sin((pos.y - elevation) * 2.0 * PI / yProportion - 2.0));\n\n    vec3 inherentColor = mix(wallColor, windowColor, (xx1 * xx2 + zz1 * zz2) * yy1);\n\n    gl_FragColor = vec4(inherentColor * sunFactor, 1.0);\n}\n"},function(o,t,e){"use strict";e.r(t);var n=e(0),r=e.n(n),i=e(1),a=e.n(i);AFRAME.registerShader("buildings",{schema:{elevation:{type:"number",default:0},xProportion:{type:"number",default:5},zProportion:{type:"number",default:5},yProportion:{type:"number",default:4},windowWidth:{type:"number",default:0,min:-1,max:1},windowHeight:{type:"number",default:-.4,min:-1,max:1},wallColor:{type:"color",default:"#909090"},windowColor:{type:"color",default:"#181818"},sunPosition:{type:"vec3",default:{x:-1,y:1,z:-1}}},init:function(o){let t=new THREE.Vector3(o.sunPosition.x,o.sunPosition.y,o.sunPosition.z);this.material=new THREE.ShaderMaterial({uniforms:{elevation:{value:o.elevation},xProportion:{value:o.xProportion},zProportion:{value:o.zProportion},yProportion:{value:o.yProportion},windowWidth:{value:-o.windowWidth},windowHeight:{value:-o.windowHeight},wallColor:{value:new THREE.Color(o.wallColor)},windowColor:{value:new THREE.Color(o.windowColor)},sunNormal:{value:t.normalize()}},vertexShader:r.a,fragmentShader:a.a})},update:function(o){this.material.uniforms.elevation.value=o.elevation,this.material.uniforms.xProportion.value=o.xProportion,this.material.uniforms.zProportion.value=o.zProportion,this.material.uniforms.yProportion.value=o.yProportion,this.material.uniforms.windowWidth.value=-o.windowWidth,this.material.uniforms.windowHeight.value=-o.windowHeight,this.material.uniforms.wallColor.value.set(o.wallColor),this.material.uniforms.windowColor.value.set(o.windowColor);let t=new THREE.Vector3(o.sunPosition.x,o.sunPosition.y,o.sunPosition.z);this.material.uniforms.sunNormal.value=t.normalize()}}),AFRAME.registerGeometry("ell",{schema:{elevation:{type:"number",default:0},xProportion:{type:"number",default:5,min:1},zProportion:{type:"number",default:5,min:1},yProportion:{type:"number",default:4,min:2},buildings:{type:"string",default:"[{}]"}},init:function(o){const t=JSON.parse(o.buildings),e=new Float32Array(90*t.length),n=new Float32Array(90*t.length),r=[];for(let i=0;i<t.length;++i){let a=t[i].x||0,l=t[i].z||0,s=o.elevation+(t[i].y||0),u=Math.max(t[i].xCoreSections||2,1),p=Math.max(t[i].xWingSections||0,0),m=Math.max(t[i].zCoreSections||2,1),d=Math.max(t[i].zWingSections||0,0),f=u*o.xProportion,w=p*o.xProportion,y=m*o.zProportion,P=d*o.zProportion,h=s+(t[i].ySections||1)*o.yProportion;e.set([a,s,l],90*i+0),e.set([a+w,s,l],90*i+3),e.set([a+w,h,l],90*i+6),e.set([a,h,l],90*i+9),n.set([0,0,1,0,0,1,0,0,1,0,0,1],90*i+0),r.push(30*i+0,30*i+1,30*i+2,30*i+2,30*i+3,30*i+0),e.set([a+w,s,l],90*i+12),e.set([a+w,s,l-y],90*i+15),e.set([a+w,h,l-y],90*i+18),e.set([a+w,h,l],90*i+21),n.set([1,0,0,1,0,0,1,0,0,1,0,0],90*i+12),r.push(30*i+4,30*i+5,30*i+6,30*i+6,30*i+7,30*i+4),e.set([a+w,s,l-y],90*i+24),e.set([a-f,s,l-y],90*i+27),e.set([a-f,h,l-y],90*i+30),e.set([a+w,h,l-y],90*i+33),n.set([0,0,-1,0,0,-1,0,0,-1,0,0,-1],90*i+24),r.push(30*i+8,30*i+9,30*i+10,30*i+10,30*i+11,30*i+5),e.set([a-f,s,l-y],90*i+36),e.set([a-f,s,l+P],90*i+39),e.set([a-f,h,l+P],90*i+42),e.set([a-f,h,l-y],90*i+45),n.set([-1,0,0,-1,0,0,-1,0,0,-1,0,0],90*i+36),r.push(30*i+12,30*i+13,30*i+14,30*i+14,30*i+15,30*i+12),e.set([a-f,s,l+P],90*i+48),e.set([a,s,l+P],90*i+51),e.set([a,h,l+P],90*i+54),e.set([a-f,h,l+P],90*i+57),n.set([0,0,1,0,0,1,0,0,1,0,0,1],90*i+48),r.push(30*i+16,30*i+17,30*i+18,30*i+18,30*i+19,30*i+16),e.set([a,s,l+P],90*i+60),e.set([a,s,l],90*i+63),e.set([a,h,l],90*i+66),e.set([a,h,l+P],90*i+69),n.set([1,0,0,1,0,0,1,0,0,1,0,0],90*i+60),r.push(30*i+20,30*i+21,30*i+22,30*i+22,30*i+23,30*i+20),e.set([a,h,l],90*i+72),e.set([a+w,h,l],90*i+75),e.set([a+w,h,l-y],90*i+78),e.set([a-f,h,l-y],90*i+81),e.set([a-f,h,l+P],90*i+84),e.set([a,h,l+P],90*i+87),n.set([0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],90*i+72),r.push(30*i+24,30*i+25,30*i+26,30*i+26,30*i+27,30*i+24,30*i+27,30*i+28,30*i+24,30*i+28,30*i+29,30*i+24)}this.geometry=new THREE.BufferGeometry,this.geometry.setAttribute("position",new THREE.BufferAttribute(e,3)),this.geometry.setAttribute("normal",new THREE.BufferAttribute(n,3)),this.geometry.setIndex(r),this.geometry.computeBoundingBox()}}),AFRAME.registerPrimitive("a-shader-buildings",{defaultComponents:{geometry:{primitive:"ell",buildings:[]},material:{shader:"buildings"}},mappings:{"elevation-geometry":"geometry.elevation","x-proportion-geometry":"geometry.xProportion","z-proportion-geometry":"geometry.zProportion","y-proportion-geometry":"geometry.yProportion",buildings:"geometry.buildings","elevation-material":"material.elevation","x-proportion-material":"material.xProportion","z-proportion-material":"material.zProportion","y-proportion-material":"material.yProportion","window-width":"material.windowWidth","window-height":"material.windowHeight","wall-color":"material.wallColor","window-color":"material.windowColor","sun-position":"material.sunPosition"}})}]);